<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ðŸŽ† Happy New Year ðŸŽ†</title>

<style>
html, body {
  margin: 0;
  padding: 0;
  background: #000;
  overflow: hidden;
}

canvas {
  display: block;
}

#title {
  position: fixed;
  top: 40%;
  width: 100%;
  text-align: center;
  font-size: clamp(28px, 6vw, 52px);
  font-family: Arial, sans-serif;
  font-weight: bold;
  transition: color 0.4s, text-shadow 0.4s;
  user-select: none;
  z-index: 10;
}
</style>
</head>
<body>

<div id="title">ðŸŽ† HAPPY NEW YEAR ðŸŽ†</div>
<canvas id="canvas"></canvas>

<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");
const title = document.getElementById("title");

function resize() {
  canvas.width = innerWidth;
  canvas.height = innerHeight;
}
resize();
addEventListener("resize", resize);

const COLORS = [
  "#ff4040", "#ffd700", "#00e5ff",
  "#00ff7f", "#ff00ff", "#ff8c00",
  "#ffffff"
];

// ===== ROCKET (phÃ¡o bay lÃªn) =====
class Rocket {
  constructor() {
    this.x = Math.random() * canvas.width;
    this.y = canvas.height;
    this.vy = -(Math.random() * 3 + 8); // tá»‘c Ä‘á»™ báº¯n
    this.gravity = 0.05;
    this.exploded = false;
    this.trail = [];
  }

  update() {
    this.trail.push({ x: this.x, y: this.y });
    if (this.trail.length > 15) this.trail.shift();

    this.y += this.vy;
    this.vy += this.gravity;

    // khi gáº§n Ä‘áº¡t Ä‘á»‰nh thÃ¬ ná»• (giá»‘ng phÃ¡o tháº­t)
    if (this.vy >= -0.5 && !this.exploded) {
      this.exploded = true;
      explode(this.x, this.y);
    }
  }

  draw() {
    // Ä‘uÃ´i lá»­a
    for (let i = 0; i < this.trail.length; i++) {
      const p = this.trail[i];
      ctx.globalAlpha = i / this.trail.length;
      ctx.fillStyle = "orange";
      ctx.fillRect(p.x, p.y, 2, 8);
    }
    ctx.globalAlpha = 1;

    // Ä‘áº§u phÃ¡o
    ctx.fillStyle = "#fff";
    ctx.fillRect(this.x, this.y, 2, 10);
  }
}

// ===== PARTICLE (tia phÃ¡o ná»•) =====
class Particle {
  constructor(x, y, angle, speed, color) {
    this.x = x;
    this.y = y;
    this.vx = Math.cos(angle) * speed;
    this.vy = Math.sin(angle) * speed;
    this.gravity = 0.06;
    this.life = 120;
    this.color = color;
  }

  update() {
    this.x += this.vx;
    this.y += this.vy;
    this.vy += this.gravity;
    this.life--;
  }

  draw() {
    ctx.globalAlpha = this.life / 120;
    ctx.beginPath();
    ctx.arc(this.x, this.y, 2.2, 0, Math.PI * 2);
    ctx.fillStyle = this.color;
    ctx.fill();
    ctx.globalAlpha = 1;
  }
}

let rockets = [];
let particles = [];

// ===== Ná»” PHÃO =====
function explode(x, y) {
  const color = COLORS[Math.floor(Math.random() * COLORS.length)];

  // Ä‘á»•i mÃ u chá»¯ theo phÃ¡o
  title.style.color = color;
  title.style.textShadow = `0 0 30px ${color}`;

  const count = innerWidth < 600 ? 60 : 100;
  for (let i = 0; i < count; i++) {
    const angle = (Math.PI * 2 / count) * i;
    const speed = Math.random() * 4 + 3;
    particles.push(new Particle(x, y, angle, speed, color));
  }
}

// ===== LOOP =====
function animate() {
  ctx.fillStyle = "rgba(0,0,0,0.25)";
  ctx.fillRect(0, 0, canvas.width, canvas.height);

  rockets = rockets.filter(r => {
    r.update();
    r.draw();
    return !r.exploded;
  });

  particles = particles.filter(p => {
    p.update();
    p.draw();
    return p.life > 0;
  });

  requestAnimationFrame(animate);
}
animate();

// ===== AUTO FIRE =====
setInterval(() => {
  rockets.push(new Rocket());
}, 1000);
</script>

</body>
</html>
